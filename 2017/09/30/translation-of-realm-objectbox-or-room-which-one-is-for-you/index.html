<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--Favicon-->
    <!-- Changed by me, before:href="favicon/favicon.ico", after:href="http://liuqingwen.me/favicon/favicon.ico"  -->
    <!-- Sample: <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> -->
    <link rel="icon" href="/favicon/favicon.ico" type="image/x-icon">
    
        <script>
            //added by my blog of "liuqingwen.me"
            var url = "anhognda.com";
            var host = window.location.host;
            if(host == url || host == "www." + url) {
                document.location.href = "http://" + host;
            }
        </script>
    

    <!-- MathJax supported added by me -->
    

    <!-- Keywords, added by me -->
    
        <meta name="keywords" content="刘庆文, 博客, Godot, 游戏开发, 文章教程, Java, Python, Kotlin, Android, iOS, Swift, 安卓开发, 学习">
    

    <!--Description-->
    
        <meta name="description" content="This is a simple blog use Hexo, called Liuqingwen&#39;s last blog, all about of interesting things of Kotlin, Web, Swift, Game, 3D and life.">
    

    <!--Author-->
    
        <meta name="author" content="Liuqingwen">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="【翻译】Realm ， ObjectBox ，还是 Room ，哪个适合你？"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="A Vegetables Bird&#39;s Blog"/>

    <!--Page Cover-->
    
        <meta property="og:image" content=""/>
    

    <!-- Title -->
    
    <title>【翻译】Realm ， ObjectBox ，还是 Room ，哪个适合你？ - A Vegetables Bird&#39;s Blog</title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/sass/main.css">


    <!-- Custom CSS added by me -->
    
<link rel="stylesheet" href="/css/custom.css">

    <!-- Calendar CSS added by me -->
    
<link rel="stylesheet" href="/css/calendar.css">


    <!--[if lt IE 8]>
        
<script src="/js/ie/html5shiv.js"></script>

    <![endif]-->

    <!--[if lt IE 8]>
        
<link rel="stylesheet" href="/sass/ie8.css">

    <![endif]-->

    <!--[if lt IE 9]>
        
<link rel="stylesheet" href="/sass/ie9.css">

    <![endif]-->

    <!-- Gallery 
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" /> -->
    <link href="https://cdn.bootcss.com/featherlight/1.7.13/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-97319413-1', 'auto');
        ga('send', 'pageview');

    </script>



<meta name="generator" content="Hexo 4.2.1"></head>

<body>

    <div id="wrapper">

        <!-- Menu -->
        <!-- Header -->
<header id="header">
    <!-- outer added by me, 2018-12-17, liuqingwen.me -->
    <div class="outer">
        <div>
            <ul>
                
                    <li>
                        <a href="/"><i class="fa fa-home fa-fw"></i>&nbsp;HOME</a>
                    </li>
                
                    <li>
                        <a href="/archives"><i class="fa fa-archive fa-fw"></i>&nbsp;ARCHIVES</a>
                    </li>
                
                    <li>
                        <a href="/tags"><i class="fa fa-tags fa-fw"></i>&nbsp;TAGS</a>
                    </li>
                
                    <li>
                        <a href="/about"><i class="fa fa-user fa-fw"></i>&nbsp;ABOUT</a>
                    </li>
                
                <li class="search">
                    <a href="/tags">
                        <span class="fa-stack"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa fa-search fa-stack-1x"></i>&nbsp;
                        </span>SEARCH</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="inner">

        <!-- Logo -->
        <!-- Changes: config.root variable added -->
        <a href="/" class="logo">
            <span class="symbol"><img src="/images/logo.png" alt="Logo" /></span>
            <span class="title">A Vegetables Bird's Blog</span>
        </a>

        <!-- Added the search icon -->
        <a href="/tags" class="logo" style="float: right; ">
            <span class="symbol"><i class="fa fa-search"></i></span>
            <!-- <img src="/tipuesearch/search.png" alt="Search" /> -->
        </a>

        <!-- Nav -->
        <nav>
            <ul>
                <li><a href="#menu">Menu</a></li>
            </ul>
        </nav>

    </div>
</header>

<!-- Menu -->
<nav id="menu">
    <h2>Menu</h2>
    <ul>
        
            <li>
                <a href="/">Home</a>
            </li>
        
            <li>
                <a href="/archives">Archives</a>
            </li>
        
            <li>
                <a href="/tags">Tags</a>
            </li>
        
            <li>
                <a href="/about">About</a>
            </li>
        
        <li style="color: #4cce18;">
            <!-- <a href="/tags">
                <span><img src="/tipuesearch/search.png" alt="Search" style="width: 2em; height: 2em; vertical-align: middle;" />Search</span>
            </a> -->
            <a href="/tags"><i class="fa fa-search"></i>&nbsp;Search Blog Content</a>
        </li>
    </ul>

    <!--Added by me, for calendar widget-->
    <div id="widget-calender-liuqingwen">
        <div class="widget tag">
    <h3 class="title">calendar</h3>
    <div id="calendar"></div>
</div>
    </div>
</nav>


        <div id="main">
            <div class="inner">

                <!-- Main Content -->
                

    
    <h1 class="title">【翻译】Realm ， ObjectBox ，还是 Room ，哪个适合你？</h1>
    <div class="meta">
        <span>2017-09-30</span>
        <span>  by Liuqingwen </span>
        
            <span> | Tags: <a href="/tags/Kotlin/">Kotlin</a> <a href="/tags/Android/">Android</a> <a href="/tags/翻译/">翻译</a></span>
        
        <span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Hits</span>
        <!-- author added by me -->
    </div>


    <!-- lazy-img-loading added by me -->
    
        <span class="image main"><img src="http://liuqingwen.me/images/imgloader.gif" data-echo="realm_objectbox_room.jpg" alt="" /></span>
    


<!-- Gallery -->


<!-- Added by me..................for tipue search plugin -->
<div id="tipue_search_content" style="display: none"></div>

<!-- Content -->
<h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>原文标题：<a href="https://notes.devlabs.bg/realm-objectbox-or-room-which-one-is-for-you-3a552234fd6e" target="_blank" rel="noopener">Realm, ObjectBox or Room. Which one is for you?</a><br>原文地址：<a href="https://notes.devlabs.bg/realm-objectbox-or-room-which-one-is-for-you-3a552234fd6e" target="_blank" rel="noopener">https://notes.devlabs.bg/realm-objectbox-or-room-which-one-is-for-you-3a552234fd6e</a></p>
<h2 id="二、正文"><a href="#二、正文" class="headerlink" title="二、正文"></a>二、正文</h2><p>选择，选择，还是选择。当面对数据存储的时候，安卓开发者有太多的类库可选。不论是处理少量对象，还是构建一个大型的数集，这些工具都能完成使命，等着我们去使用。其中有一些是我们经常打交道的，比如 shared preferences 和 纯 SQL 语句，其他的则需要额外的一些依赖。庆幸的是，我保证，在这里我并不会去讨论如何写一个很长的又合理的查询语句。相反，接下来我将会对这些大联盟玩家进行类比，包括：最新发布的 <strong>Room 持久化类库</strong> ，年老健壮的 <strong>Realm</strong> ，以及鲜为人知的新秀 <strong>ObjectBox</strong> ，它最近才发布 beta 版本。至于最终的选择权，由你决定，当然到最后你也会非常（或多或少吧）清楚地知道应该选择哪一个。毫无例外，在我们开始进入泰坦大战之前，让我先来给它们作一下介绍。</p>
<ul>
<li><strong><a href="https://realm.io/" target="_blank" rel="noopener">Realm</a></strong></li>
</ul>
<p>自从它的理念发布（ 2011 年左右，原名 “ TightDB ”）以来 Realm 就自然而然地成为了许多开发者的开发首选。为什么呢？你会这么问。因为简单（几乎完全使用最标准的 Java 对象），速度快（大部分是采用 C++ 编写），并且由于 SQL （因为没有使用它）。无需深入太多细节，你就能轻松地创建一个 Realm 数据库并使用它——甚至还能做的更多。这个库无需太多配置，而且官方<a href="https://realm.io/docs/java/latest/" target="_blank" rel="noopener">文档</a>也能手把手地教会你如何一步一步的完成。</p>
<p>存储数据对象所需要做的第一件事就是建立一个数据模型：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="class"><span class="keyword">class</span> <span class="title">Box</span></span>(</span><br><span class="line">        <span class="meta">@PrimaryKey</span> <span class="keyword">var</span> size: <span class="built_in">Long</span> = <span class="number">0</span>,</span><br><span class="line">        <span class="keyword">var</span> name: String = <span class="string">""</span>,</span><br><span class="line">        <span class="meta">@Ignore</span> <span class="keyword">var</span> tempReference: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">) : RealmObject()</span><br></pre></td></tr></table></figure>

<p>这里如果你使用 Kotlin 的话，唯一值得注意的是，所有的变量必须都要有默认值。注解和继承于 RealmObject 的必要性，都能很好地解释这些代码（希望如此），那么我们继续下一步。</p>
<p>Realm 使用起来如下面的代码一样，非常简单：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Realm.<span class="keyword">init</span>(context)</span><br><span class="line"><span class="keyword">val</span> realm = Realm.getDefaultInstance()</span><br><span class="line"><span class="keyword">val</span> box = realm.<span class="keyword">where</span>(Box::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>).<span class="title">findFirst</span></span>()</span><br><span class="line">realm.executeTransaction &#123;</span><br><span class="line">    <span class="comment">//modifying an existing object</span></span><br><span class="line">    box.size = <span class="number">20</span></span><br><span class="line">    box.name = <span class="string">"John"</span></span><br><span class="line">    <span class="comment">//creating a new object</span></span><br><span class="line">    <span class="keyword">val</span> secondBox = realm.createObject(Box::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br><span class="line">    secondBox.size = <span class="number">30</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><a href="https://github.com/realm/realm-java/blob/master/examples/kotlinExample" target="_blank" rel="noopener">完整的例子在此</a></p>
<p><em>注意：基于以数据库为中心的原则，我把多线程的任务交给你了。</em></p>
<p><em>注意2：的确，这个 box 的名字就是 John 。</em></p>
<ul>
<li><strong><a href="https://developer.android.com/topic/libraries/architecture/index.html" target="_blank" rel="noopener">Room 持久化类库</a></strong></li>
</ul>
<p>进入房间（ <strong>Room</strong> ）！一个最新的，光环最闪耀的谷歌官方类库。 Room 在官方的架构指南中占据着一个中心位置，它提供在 SQLite 上的一个抽象层，允许在充分利用 SQLite 的强大基础上进行流畅地数据库访问开发。它完美地剥离开了 SQL 层，并向开发者展示出清晰、易懂的 Java 语法方法。所以，还记得我保证过没有查询语句吗？但是现在我要写一些查询语句了！不过不要担心， Room 包含的一些安全特性，能够提示你万一出现的那些令人讨厌的错误。</p>
<p>当然，至少在我写这篇文章的时候是这样（或许在很长一段时间之后也是这样）， Room 是城里最受欢迎的那个孩子，但是我将会尽量保持对他做一个简短的介绍。</p>
<p>在 Room 中有 3 个主要的组件，都是使用注解来展示说明：</p>
<p><strong>Database</strong> ：你可以使用这个组件来创建数据库的持有者。这个注解定义了一系列的实体，以及类的相关内容——数据中一系列的数据访问对象（ 一些 DAO ）。同时它也是底层数据连接访问的枢纽。这个注解标记的类必须是一个抽象类并且继承于 RoomDatabase 。你可以使用 <code>Room.databaseBuilder()</code> 或者 <code>Room.inMemoryDatabaseBuilder()</code>获取到它的一个实例。</p>
<p><strong>Entity</strong> ：这个组件代表了数据库中一行数据的类。对于各个实体，数据库中的表的创建就是为了存储它们的实例。你必须通过数据库类中的实体数组来引用实体类。</p>
<p><strong>DAO</strong> ：这个组件代表一个数据访问对象的类或者接口。 DAO 负责定义数据库访问的方法。用 @Database 注解的类必须包含一个抽象的方法，它含有 0 个参数，并返回一个使用 @Dao 注解的类。</p>
<p>下面是上面所提到过的组件的 3 个实现（羞愧地从<a href="https://manijshrestha.wordpress.com/2017/06/03/using-room-with-kotlin/" target="_blank" rel="noopener">这篇</a>精彩的文章中复制了过来）：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity(tableName = “task”)</span></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Task</span></span>(<span class="meta">@ColumnInfo(name = “completed_flag”)</span> <span class="keyword">var</span> completed: <span class="built_in">Boolean</span> = <span class="literal">false</span>,</span><br><span class="line"><span class="meta">@ColumnInfo(name = “task_desciption”)</span> <span class="keyword">var</span> description: String) &#123;</span><br><span class="line">    <span class="meta">@ColumnInfo(name = “id”)</span></span><br><span class="line">    <span class="meta">@PrimaryKey(autoGenerate = true)</span> <span class="keyword">var</span> id: <span class="built_in">Long</span> = <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Dao</span> <span class="class"><span class="keyword">interface</span> <span class="title">TaskDao</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Query(“select * from task”)</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getAllTasks</span><span class="params">()</span></span>: List&lt;Task&gt;</span><br><span class="line">    <span class="meta">@Query(“select * from task where id = :p0”)</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">findTaskById</span><span class="params">(id: <span class="type">Long</span>)</span></span>: Task</span><br><span class="line">    <span class="meta">@Insert(onConflict = REPLACE)</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">insertTask</span><span class="params">(task: <span class="type">Task</span>)</span></span></span><br><span class="line">    <span class="meta">@Delete</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">deleteTask</span><span class="params">(task: <span class="type">Task</span>)</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Database(entities = arrayOf(Task::class)</span>, version = <span class="number">1</span>, exportSchema = <span class="literal">false</span>)</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AppDatabase</span> : <span class="type">RoomDatabase</span></span>() &#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="function"><span class="keyword">fun</span> <span class="title">taskDao</span><span class="params">()</span></span>: TaskDao</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>创建一个数据库并访问它的方法非常简单：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> database = Room.databaseBuilder(context, AppDatabase::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>,<span class="type">”db”)</span></span></span><br><span class="line">            .allowMainThreadQueries().build()</span><br><span class="line"></span><br><span class="line">database.taskDao().insertTask(Task(description = “simple!”))</span><br></pre></td></tr></table></figure>

<ul>
<li><strong><a href="http://objectbox.io/" target="_blank" rel="noopener">ObjectBox</a></strong></li>
</ul>
<p>作为最新的成员， ObjectBox 给数据库带来了一大堆功能。但是在如此高的门槛面前，这个崭新的无 SQL 技术库能够和其他的大牌分庭对抗吗？毫无疑问，如果和 Realm 以及 Room 面对面肉搏的话，它必须重拳出击。结果的确如此，它不止一次重锤出击，而是出了一系列的重锤对抗。这里有这个新生库所突出的一些亮点：</p>
<p><strong>速度</strong>：如同 Realm ， ObjectBox 一样，能够提供卓越的性能，甚至某些时候它能够完全碾压其竞争对手（稍后再谈这个）。</p>
<p><strong>查询生成器</strong>：使用 ObjectBox 查询对象和编译时错误检查都非常简单。</p>
<p><strong>数据关联</strong>：对象的引用/关联是内建的内部类型，它们都属于原生本地引用。</p>
<p><strong>无需手动数据模式迁移</strong>：它能够自动处理新版本对象所新加的、删除的、重命名的属性。</p>
<p><a href="http://objectbox.io/features/" target="_blank" rel="noopener">等等，等等</a>。</p>
<p>那么实际代码中它是怎样的呢？</p>
<p>它必须有定义的模型，至少目前来说你应该很熟悉了：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">Note</span></span>(<span class="meta">@Id</span> <span class="keyword">var</span> id: <span class="built_in">Long</span> = <span class="number">0</span>, <span class="keyword">val</span> text: String)</span><br></pre></td></tr></table></figure>

<p>ObjectBox 使用叫做 <strong>Boxes</strong> （猜一下）的<strong>对象</strong>来存储并操作数据。只需 2 行代码就能把数据库和操作分离：</p>
<p>确切地说，“数据存储盒子”对象，应该放置在你的 Application 类中：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MyObjectBox.builder().androidContext(App.<span class="keyword">this</span>).build()</span><br></pre></td></tr></table></figure>

<p>每个“盒子”对应你的数据库中的数据模型。这些盒子作为一个交互点服务于你和你的数据库之间。</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> notesBox = boxStore.boxFor(Note::<span class="class"><span class="keyword">class</span>.<span class="title">java</span>)</span></span><br></pre></td></tr></table></figure>

<p>一个很重要的细节是：这些盒子类型都是自动生成的，这意味着你所需要担心的事情变得更少。</p>
<p>一旦完成了这些，你就可以准备下一步行动了，这里有一些可用的方法提供给你使用：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">notesBox.put(note)</span><br><span class="line">notesBox.remove(note)</span><br><span class="line">notesBox.count()</span><br></pre></td></tr></table></figure>

<p>完整的 Box 类方法列表可以查看它的 <a href="http://objectbox.io/files/objectbox-java/current/io/objectbox/Box.html" target="_blank" rel="noopener">Java 文档</a>。这里有一件事需要提醒注意的是名叫 <a href="http://greenrobot.org/greendao/documentation/objectbox-compat/" target="_blank" rel="noopener">DaoCompat</a> 的兼容层，允许使用像 greenDAO 一样的 API 来操作 ObjectBox 。</p>
<ul>
<li><strong>比较</strong></li>
</ul>
<p>到目前为止，所有的类库都做到了差不多相同的事情，有些需要，有些则不需要 SQL 语句。然而，我们更感兴趣的是它们的区别。如下图，我通过 3 种不同的方式分别测试了它们的性能，测试过程使用的是这个开源的性能测试<a href="https://github.com/objectbox/objectbox-performance" target="_blank" rel="noopener">应用程序</a>。</p>
<img src="http://liuqingwen.me/images/imgloader.gif" data-echo="realm_objectbox_room_comparison_1.jpeg" alt="realm_objectbox_room_comparison" style="float: left; padding: 10px; " />
<img src="http://liuqingwen.me/images/imgloader.gif" data-echo="realm_objectbox_room_comparison_2.jpeg" alt="realm_objectbox_room_comparison" style="float: left; padding: 10px; " />
<img src="http://liuqingwen.me/images/imgloader.gif" data-echo="realm_objectbox_room_comparison_3.jpeg" alt="realm_objectbox_room_comparison" style="float: left; padding: 10px; " />
<img src="http://liuqingwen.me/images/imgloader.gif" data-echo="realm_objectbox_room_comparison_4.jpeg" alt="realm_objectbox_room_comparison" style="float: left; padding: 10px; " />
<img src="http://liuqingwen.me/images/imgloader.gif" data-echo="realm_objectbox_room_comparison_5.jpeg" alt="realm_objectbox_room_comparison" />

<p style="text-align: center;font-size: 80%;">测试 100k/10k 个元素的性能，以毫秒为单位</p>

<p>非常漂亮而又很有意思的结果，你觉得呢？从这个测试中可以很清晰地看到，大多数情况下 ObjectBox 都能碾压所有其他竞争对手。并且，当然随着元素的数量级的增加，差距变得越来越大！对于一个新成员来说，表现得还行。<em>可以说非常好。</em></p>
<img src="http://liuqingwen.me/images/imgloader.gif" data-echo="realm_objectbox_room_comparison_6.jpeg" alt="realm_objectbox_room_comparison" style="float: left; margin-right: 20px; " />

<p>查询同样看上去是 ObjectBox 的一个强项。测试中采用了字符串和索引，结果不言自明。</p>
<p>那么 apk 的大小又如何呢？这几个类库对我们项目的整体速度影响又有几何？好吧，我们可以使用最新发布的 apk 分析工具来精确地查看一下每一个类库其影响程度如何。</p>
<p>ObjectBox 和 Realm 分别占用空间高达 <strong>1-1.5MB</strong> 和 <strong>3-4MB</strong> （这个大小取决于手机的框架），而 Room ，作为一个 SQL 包装工具，仅仅占用了 <strong>50KB</strong> 的大小。但是为秉承安卓开发者一贯作风，我们还必须针对那烦人的方法数量限制进行一下统计。在这个方法层面上， Room 那谦虚的 <strong>300 个方法数</strong> 看起来又要再次领跑比赛了。接着是有着 <strong>1300</strong> 个方法的 ObjectBox 和 <strong>2000 个方法</strong>的 realm。</p>
<p>明智的是，这几个竞争者都各自提供了一些额外的特性。 Room 提供了 SQLite 所能做的一切，并附加了一些其他的功能。比如<a href="https://developer.android.com/topic/libraries/architecture/room.html#db-migration" target="_blank" rel="noopener">迁移机制</a>，而且这完全是可以进行测试的。相反， ObjectBox 甚至都不需要这个，因为它会自动处理大部分情况下的迁移（尽管对于某些改变，它需要额外的信息来明确目标）。 Realm 则装备了最多的令人惊奇的武器，它的这些特性包括自定义配置，加密和更多其他功能（这也是它尺寸比较大的原因之一）。</p>
<ul>
<li><strong>结论</strong></li>
</ul>
<p>我们可以看到，不论你选择了哪条路，它都有着自己的长处和短处。如果你需要速度和效率，很明显 ObjectBox 是一个不错的选择。然而，如果你被应用的大小所限制，被那 64k 个方法所限制，同时你也愿意去使用 SQL 语句，那么 Room 是一个很好的解决方案。另一方面，针对 Realm ，可能不是最快的，也不是最小的，但是在它们背后，在经历了超过 7 年的问题反馈检测和改进之后，它给大家提供的是最稳定的、无 bug 的、理智的解决方案。</p>
<p>至于选择哪一个，这取决于你，但是请记住，一个应用程序只要你选择对了就足够了<em>（当然也取决于你的代码，但是那又是另一个话题了）</em>。</p>
<h2 id="三、完"><a href="#三、完" class="headerlink" title="三、完"></a>三、完</h2><blockquote>
<p>作者：<a href="https://notes.devlabs.bg/@radoslavyankov_73603" target="_blank" rel="noopener">Radoslav Yankov</a><br>平台：<a href="https://notes.devlabs.bg/?source=footer_card" target="_blank" rel="noopener">Dev Labs</a><br>标签： Android Objectbox Realm Room Comparison</p>
</blockquote>


<!-- Tags -->



<div class="tags">
    <a href="/tags/Kotlin/" class="button small">Kotlin</a> <a href="/tags/Android/" class="button small">Android</a> <a href="/tags/翻译/" class="button small">翻译</a>
</div>



<!-- Pre-Next post added by me -->
<!-- Added by me, for pre-post and next-post links in post page -->

    <div class="prev_next clearfix">
      
        <a href="/2017/10/03/reading-notes-of-kotlin-in-action-part-2/" class="alignleft prev" title="【读书笔记】《Kotlin in Action》学习笔记（下）"><i class="fa fa-angle-double-left"></i>&nbsp;【读书笔记】《Kotlin in Action》学习笔记（下）</a>
      
      
        &nbsp;<i class="fa fa-exchange separator"></i>&nbsp;
      
      
        <a href="/2017/09/16/reading-notes-of-kotlin-in-action-part-1/" class="alignright next" title="【读书笔记】《Kotlin in Action》学习笔记（上）">【读书笔记】《Kotlin in Action》学习笔记（上）&nbsp;<i class="fa fa-angle-double-right"></i></a>
      
      <div class="clearfix"></div>
    </div>



<!-- Comments -->
<div>
    
    <hr />
    <h3>Comments:</h3>
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
    </div>



</div>



            </div>
        </div>

        <!-- Footer -->
<footer id="footer">
    <div class="inner">
        <section>
            <h2>About</h2>
            <div>
                This theme was initially developed by <a href="http://html5up.net" target="_blank">HTML5 UP</a>. It is adapted for Hexo by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a>. <br/>The source code is available on <a href="https://github.com/klugjo/hexo-theme-phantom" target="_blank">GitHub</a>. <br/><span id="busuanzi_container_site_pv">Total visits:&nbsp;<span id="busuanzi_value_site_pv"></span> , </span><span id="busuanzi_container_site_uv">Number of visitors:&nbsp;<span id="busuanzi_value_site_uv"></span> , staticstics powered by <a href="http://busuanzi.ibruce.info/" target="_blank" title="不蒜子统计">不蒜子</a></span> <br/>Blog post content:&nbsp;<a href="http://liuqingwen.me/tags"><span><i class="fa fa-search"></i>&nbsp;搜索博客内容</span></a>
            </div>
        </section>
        <section>
            <h2>Follow</h2>
            <ul class="icons">
                
                    <li><a href="https://twitter.com/SpkingR" class="icon style2 fa-twitter" target="_blank" ><span class="label">Twitter</span></a></li>
                
                
                
                
                
                    <li><a href="https://github.com/spkingr" class="icon style2 fa-github" target="_blank" ><span class="label">GitHub</span></a></li>
                
                
                    <li><a href="https://plus.google.com/u/0/101955667782244488142" class="icon style2 fa-google-plus" target="_blank" ><span class="label">Google+</span></a></li>
                
                
                
                
                    <li><a href="about/" class="icon style2 fa-envelope-o" target="_blank" ><span class="label">Email</span></a></li>
                
                
                    <li><a href="/atom.xml" class="icon style2 fa-rss" target="_blank" ><span class="label">RSS</span></a></li>
                
            </ul>
            <ul class="links">
                <!-- Added by me, settings in config file -->
                
                    <li><a href="https://zhuanlan.zhihu.com/godot" class="icon style2 zhihu" target="_blank" ><span class="label">知乎</span></a></li>
                
                
                    <li><a href="https://www.jianshu.com/u/756bad579149" class="icon style2 jianshu" target="_blank" ><span class="label">简书</span></a></li>
                
                
                    <li><a href="https://juejin.im/user/59d1d5b1f265da0656048d2b" class="icon style2 juejin" target="_blank" ><span class="label">掘金</span></a></li>
                
                
                    <li><a href="https://blog.csdn.net/SpkingR" class="icon style2 csdn" target="_blank" ><span class="label">CSDN</span></a></li>
                
                
                    <li><a href="https://www.indienova.com/u/liuqingwen" class="icon style2 indienova" target="_blank" ><span class="label">INDIE NOVA</span></a></li>
                
            </ul>
        </section>
        <ul class="copyright">
            <li>&copy; liuqingwen.me. All rights reserved</li>
            <li>Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a></li>
            <li>Hexo: <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></li>
            <li>About Me: <a href="/about">Liuqingwen</a></li>
            <li>备案号: <a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener">湘ICP备14005092号</a></li>
        </ul>
    </div>
</footer>
    </div>

    <!-- After footer scripts -->
    <!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- skel -->

<script src="/js/skel.min.js"></script>


<!-- Custom Code -->

<script src="/js/util.js"></script>


<!--[if lte IE 8]>

<script src="/js/ie/respond.min.js"></script>

<![endif]-->

<!-- Custom Code -->

<script src="/js/main.js"></script>

<!-- My Custom Code for add lazy-loading-image plugin -->

<script src="/scripts/echo.js"></script>


<script>
    echo.init({
        offset: 100,
        throttle: 250,
        unload: false,
        callback: function (element, op) {
            //Added by me!!! Help to display correctly in Mobile
            /*var entryContentWidth = $(element).width();
            if($(element).width() > entryContentWidth)
            {
                $(element).width("100%");
            }*/
            $(element).css({maxWidth: "100%"});
            // console.log(element, 'has been', op + 'ed');
        }
    });
  // echo.render(); is also available for non-scroll callbacks
</script>

<!-- Added for tipue search plugin....................... -->
<link href="/tipuesearch/css/tipuesearch.css" rel="stylesheet">
<script src="/tipuesearch/tipuesearch_set.js"></script>
<script src="/tipuesearch/tipuesearch.js"></script>
<script>
    $(document).ready(function () {
 
        var searchInput = $('#tipue_search_input');
        searchInput.tipuesearch({
            'mode': 'json',
            'minimumLength': 2,
            'contentLocation': '/tipuesearch/tipuesearch_content.json',
            highlightEveryTerm: true
        });
 
        $('#search-form').on('submit', function (e) {
            e.preventDefault();
            $('#tipue_search_content').show();
            $('#content').hide();
        });
 
        searchInput.keyup(function () {
            var length = $(this).val().length;
            if (length < 1) {
                $('#tipue_search_content').hide();
                $('#content').show();
            }
        });
    });
</script>

<!-- Gallery 
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script> -->
<script src="https://cdn.bootcss.com/featherlight/1.7.13/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'liuqingwen';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


<!-- Calendar -->
<!-- Add by me, the calendar plugin, from: http://howiefh.github.io/2016/04/29/hexo-s-calendar-plugin/ -->

    <script src="/js/calendar.js"></script>
    <script src="/js/languages.js"></script>
    <script type="text/javascript">
        $(function() {
            
                //The same in else! edited by me.....
                $('#calendar').aCalendar('zh-CN',{single:true, root:'calendar/'});
                
                
                    $('#calendar-sample').aCalendar('zh-CN',{single:true, root:'calendar/'});
                
                //Error in the below line:
                //$('#calendar').aCalendar('zh-CN', $.extend(JSON.parse('{"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"dayOfWeekShort":["S","M","T","W","T","F","S"],"dayOfWeek":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"postsMonthTip":"Posts published in LMM yyyy","titleFormat":"yyyy LMM","titleLinkFormat":"/archives/yyyy/MM/","headArrows":{"previous":null,"next":null},"footArrows":{"previous":"«","next":"»"},"weekOffset":0,"single":true,"root":"/calendar/","url":"/calendar.json"}'), {single:true, root:'calendar/'});
            
        });
    </script>


<!-- Calculator of Blog Viewers -->
<!-- Added by me, http://ibruce.info/2015/04/04/busuanzi/ || http://busuanzi.ibruce.info/-->

    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



</body>

</html>