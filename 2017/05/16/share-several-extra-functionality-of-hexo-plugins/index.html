<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--Favicon-->
    <!-- Changed by me, before:href="favicon/favicon.ico", after:href="http://liuqingwen.me/favicon/favicon.ico"  -->
    <!-- Sample: <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> -->
    <link rel="icon" href="/favicon/favicon.ico" type="image/x-icon">
    
        <script>
            //added by my blog of "liuqingwen.me"
            var url = "anhognda.com";
            var host = window.location.host;
            if(host == url || host == "www." + url) {
                document.location.href = "http://" + host;
            }
        </script>
    

    <!-- MathJax supported added by me -->
    

    <!-- Keywords, added by me -->
    
        <meta name="keywords" content="刘庆文, 博客, Godot, 游戏开发, 文章教程, Java, Python, Kotlin, Android, iOS, Swift, 安卓开发, 学习">
    

    <!--Description-->
    
        <meta name="description" content="This is a simple blog use Hexo, called Liuqingwen&#39;s last blog, all about of interesting things of Kotlin, Web, Swift, Game, 3D and life.">
    

    <!--Author-->
    
        <meta name="author" content="Liuqingwen">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="分享几个实用的HEXO博客功能插件"/>
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="A Vegetables Bird&#39;s Blog"/>

    <!--Page Cover-->
    
        <meta property="og:image" content=""/>
    

    <!-- Title -->
    
    <title>分享几个实用的HEXO博客功能插件 - A Vegetables Bird&#39;s Blog</title>

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/sass/main.css">


    <!-- Custom CSS added by me -->
    
<link rel="stylesheet" href="/css/custom.css">

    <!-- Calendar CSS added by me -->
    
<link rel="stylesheet" href="/css/calendar.css">


    <!--[if lt IE 8]>
        
<script src="/js/ie/html5shiv.js"></script>

    <![endif]-->

    <!--[if lt IE 8]>
        
<link rel="stylesheet" href="/sass/ie8.css">

    <![endif]-->

    <!--[if lt IE 9]>
        
<link rel="stylesheet" href="/sass/ie9.css">

    <![endif]-->

    <!-- Gallery 
    <link href="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.css" type="text/css" rel="stylesheet" /> -->
    <link href="https://cdn.bootcss.com/featherlight/1.7.13/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Google Analytics -->
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-97319413-1', 'auto');
        ga('send', 'pageview');

    </script>



<meta name="generator" content="Hexo 4.2.1"></head>

<body>

    <div id="wrapper">

        <!-- Menu -->
        <!-- Header -->
<header id="header">
    <!-- outer added by me, 2018-12-17, liuqingwen.me -->
    <div class="outer">
        <div>
            <ul>
                
                    <li>
                        <a href="/"><i class="fa fa-home fa-fw"></i>&nbsp;HOME</a>
                    </li>
                
                    <li>
                        <a href="/archives"><i class="fa fa-archive fa-fw"></i>&nbsp;ARCHIVES</a>
                    </li>
                
                    <li>
                        <a href="/tags"><i class="fa fa-tags fa-fw"></i>&nbsp;TAGS</a>
                    </li>
                
                    <li>
                        <a href="/about"><i class="fa fa-user fa-fw"></i>&nbsp;ABOUT</a>
                    </li>
                
                <li class="search">
                    <a href="/tags">
                        <span class="fa-stack"><i class="fa fa-square-o fa-stack-2x"></i><i class="fa fa-search fa-stack-1x"></i>&nbsp;
                        </span>SEARCH</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="inner">

        <!-- Logo -->
        <!-- Changes: config.root variable added -->
        <a href="/" class="logo">
            <span class="symbol"><img src="/images/logo.png" alt="Logo" /></span>
            <span class="title">A Vegetables Bird's Blog</span>
        </a>

        <!-- Added the search icon -->
        <a href="/tags" class="logo" style="float: right; ">
            <span class="symbol"><i class="fa fa-search"></i></span>
            <!-- <img src="/tipuesearch/search.png" alt="Search" /> -->
        </a>

        <!-- Nav -->
        <nav>
            <ul>
                <li><a href="#menu">Menu</a></li>
            </ul>
        </nav>

    </div>
</header>

<!-- Menu -->
<nav id="menu">
    <h2>Menu</h2>
    <ul>
        
            <li>
                <a href="/">Home</a>
            </li>
        
            <li>
                <a href="/archives">Archives</a>
            </li>
        
            <li>
                <a href="/tags">Tags</a>
            </li>
        
            <li>
                <a href="/about">About</a>
            </li>
        
        <li style="color: #4cce18;">
            <!-- <a href="/tags">
                <span><img src="/tipuesearch/search.png" alt="Search" style="width: 2em; height: 2em; vertical-align: middle;" />Search</span>
            </a> -->
            <a href="/tags"><i class="fa fa-search"></i>&nbsp;Search Blog Content</a>
        </li>
    </ul>

    <!--Added by me, for calendar widget-->
    <div id="widget-calender-liuqingwen">
        <div class="widget tag">
    <h3 class="title">calendar</h3>
    <div id="calendar"></div>
</div>
    </div>
</nav>


        <div id="main">
            <div class="inner">

                <!-- Main Content -->
                

    
    <h1 class="title">分享几个实用的HEXO博客功能插件</h1>
    <div class="meta">
        <span>2017-05-16</span>
        <span>  by Liuqingwen </span>
        
            <span> | Tags: <a href="/tags/Hexo/">Hexo</a></span>
        
        <span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Hits</span>
        <!-- author added by me -->
    </div>


    <!-- lazy-img-loading added by me -->
    
        <span class="image main"><img src="http://liuqingwen.me/images/imgloader.gif" data-echo="Hexo plugins.png" alt="" /></span>
    


<!-- Gallery -->


<!-- Added by me..................for tipue search plugin -->
<div id="tipue_search_content" style="display: none"></div>

<!-- Content -->
<h2 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h2><p>即使是作为一名前端完全新手，也不希望自己的博客页面功能过于简单，虽然花哨的功能不需要，但是一些最基本的大众化模块还是要有吧，我的 Hexo 博客使用的主题 <span markdown="1" style="color: #13b900; ">Phantom</span> <em>（下文中提到的主题文件夹也就是这个文件名，但是我会写成 <code>${theme_dir}</code> ）</em>就是属于功能模块比较简单的那种主题，借助 Hexo 强大的功能扩展能力，自己动手整合了一些有用的插件到我的博客中，主要包括：非插件化的 CSS 样式控制、文章表情符 emoji 显示、博客 RSS 订阅功能、文章图片懒加载显示、静态搜索 search 功能等！</p>
<p>添加了这些功能后，感觉踏实多了， :grimacing: 可折腾我不少时间了，现在我把这些功能添加的过程大致的分享一下，作为自己的备忘，也希望帮助到其他有需求的前端小白们更好地使用 Hexo 博客构筑，如果是大神的话，你可以忽略了。 :grimacing:</p>
<h2 id="二、功能模块"><a href="#二、功能模块" class="headerlink" title="二、功能模块"></a>二、功能模块</h2><p>我这里主要使用也是推荐应用的功能模块主要就以下几个：</p>
<ol>
<li><span markdown="1" style="color: #13b900; ">Markdown 中自定义 CSS 样式</span></li>
<li><span markdown="1" style="color: #13b900; ">添加博客 RSS 订阅功能</span></li>
<li><span markdown="1" style="color: #13b900; ">文章添加 emoji 表情符</span></li>
<li><span markdown="1" style="color: #13b900; ">文章里图片的懒加载功能</span></li>
<li><span markdown="1" style="color: #13b900; ">强大的静态搜索功能插件</span></li>
</ol>
<h3 id="1-Markdown-中自定义-CSS-样式"><a href="#1-Markdown-中自定义-CSS-样式" class="headerlink" title="1. Markdown 中自定义 CSS 样式"></a>1. Markdown 中自定义 CSS 样式</h3><p>有时候写文章需要一些特殊的字体或者颜色表现样式，这其实很简单，不需要任何插件，直接在 <code>md</code> 文章文件中使用 <code>HTML</code> 加 <code>CSS</code> 样式就可以了，就像这样：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;p markdown="1" style="</span><br><span class="line">    color: red; </span><br><span class="line">    font-weight: bold; "</span><br><span class="line">&gt;PS: （2017-05-15更新）更新的内容如下......&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p markdown="1" style="
    color: red; 
    font-weight: bold; "
>PS: （2017-05-15更新）更新的内容如下......</p>

<p>另外 <a href="https://hexo.io/docs/tag-plugins.html" target="_blank" rel="noopener">Hexo 官方</a>说明的方式是添加 <code>` 和 `</code> 标签块，结果和上面不使用标签块是一样的：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&lt;p markdown="1" style="</span><br><span class="line">    color: red; </span><br><span class="line">    font-weight: bold; "</span><br><span class="line">&gt;PS: （2017-05-15更新）更新的内容如下......&lt;/p&gt;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure>

<p>尽情的在 <code>style=&quot;&quot;</code> 中添加你想要的样式吧。 :grin:</p>
<h3 id="2-添加博客-RSS-订阅功能"><a href="#2-添加博客-RSS-订阅功能" class="headerlink" title="2. 添加博客 RSS 订阅功能"></a>2. 添加博客 RSS 订阅功能</h3><p>虽然这个功能有点鸡肋，但是如果你是一位优秀的博主，日志文章被大量客户访问阅读，那么你必定需要 RSS 订阅模块，为那些有需求的客户提供日志订阅的功能。我的博客 RSS 订阅就是一个 XML 文件的链接，这个 <a href="http://liuqingwen.me/blog/atom.xml">XML 文件</a>需要由插件自动生成，这个插件是： <code>hexo-generator-feed</code> ，在 GitHub 上有相关应用说明：<a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexojs/hexo-generator-feed</a> 。直接安装这个 Hexo 插件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>

<p>安装好之后，每次 <code>hexo g</code> 命令或者启动服务都会自动生成 <code>atom.xml</code> 文件（你也可以设置成 <code>rss2.xml</code> 文件，具体设置参考官网吧），然后把 RSS 订阅的地址链接到这个文件即可！ So easy! :laughing:</p>
<h3 id="3-文章添加-emoji-表情符"><a href="#3-文章添加-emoji-表情符" class="headerlink" title="3. 文章添加 emoji 表情符"></a>3. 文章添加 emoji 表情符</h3><p>表情符这么重要的写作功能怎么能不具备呢？习惯了在微信、 QQ 上聊天的表情符号，写作也必须来几桶表情符是吧？！ :sunglasses:</p>
<p>其实表情符都是一些小图片，如果直接在写文章的时候像插入图片一样插入表情符，那会比较痛苦，所以我们需要安装一个表情符简写渲染的插件： <code>hexo-filter-github-emojis</code> ：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-filter-github-emojis --save</span><br></pre></td></tr></table></figure>

<p>安装后在根目录下的配置文件 <code>_config.yml</code> 中进行具体配置，还可以添加自定义的表情符（我已经把网站上的部分表情符下载到本地改成自定义表情符了 :laughing: ）：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">githubEmojis:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">className:</span> <span class="string">github-emoji</span></span><br><span class="line">  <span class="attr">unicode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">localEmojis:</span></span><br><span class="line">    <span class="attr">your_emoji_1:</span> </span><br><span class="line">      <span class="attr">src:</span> <span class="string">http://your/emoji/path/img1.png</span></span><br><span class="line">    <span class="attr">your_emoji_2:</span> </span><br><span class="line">      <span class="attr">src:</span> <span class="string">http://your/emoji/path/img2.png</span></span><br></pre></td></tr></table></figure>

<p>这样你在写文章的时候可以直接简单地用这种格式表达表情符： <code>:your_emoji_1:</code> <code>:your_emoji_2:</code> ，最后文章渲染显示就是类似这样的表情图片了： :wink: :yum: :stuck_out_tongue_winking_eye: :smiley: :joy: :sunglasses:</p>
<p>具体说明可以到插件地址查看： <a href="https://github.com/crimx/hexo-filter-github-emojis" target="_blank" rel="noopener">hexo-filter-github-emojis</a> ，内有详细使用配置说明。</p>
<h3 id="4-文章里图片的懒加载功能"><a href="#4-文章里图片的懒加载功能" class="headerlink" title="4. 文章里图片的懒加载功能"></a>4. 文章里图片的懒加载功能</h3><p>这是我很喜欢的一个功能，也是折腾我最久的，毕竟新手加小白 :joy: 。图片的懒加载在很多地方都能看到，比如微信订阅号的文章就是采用图片懒加载的方式显示，这是一个流量为王和手机阅读的时代，大量的图片容易造成不必要的流量耗费，不过懒加载并不是减少流量使用，而是当不需要显示的时候就不要耗费多余的流量了，增加用户体验吧。</p>
<p>实现这个功能对我来说有点繁琐，首先需要安装渲染插件： <code>hexo-renderer-marked-lazy</code> ，然后还需要一个 JS 库： <code>Echo.js</code> ，最后需要手动写一点点 JS 代码，一步一步的来：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-renderer-marked-lazy --save</span><br></pre></td></tr></table></figure>

<p>上面安装插件之后，在根目录配置的文件 <code>_config.yml</code> 中添加以下配置：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">marked:</span></span><br><span class="line">    <span class="attr">lazyAttr:</span> <span class="string">data-echo</span></span><br><span class="line">    <span class="attr">blankSrc:</span> <span class="string">http://your/loading/path/blankSrc.gif</span></span><br></pre></td></tr></table></figure>

<p>配置原理我等下说，接着需要在生成文章的页面添加相关 JS 脚本，我直接下载了 <code>echo.js</code> 这个脚本（连接：<a href="https://github.com/toddmotto/echo/blob/master/src/echo.js" target="_blank" rel="noopener">echo.js</a> ），保存在博客主题下的文件夹中：<code>${theme_dir}/source/scripts/echo.js</code> ，接下来在主题文件夹下的模板文件 <code>${theme_dir}/source/after-footer.ejs</code> 中添加应用 JS 代码，这样生成的每篇文章都会包含这个 JS 脚本：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- js(<span class="string">'scripts/echo.js'</span>) %&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  echo.init(&#123;</span><br><span class="line">    offset: <span class="number">100</span>,</span><br><span class="line">    throttle: <span class="number">250</span>,</span><br><span class="line">    unload: <span class="literal">false</span>,</span><br><span class="line">    callback: <span class="function"><span class="keyword">function</span> (<span class="params">element, op</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(element, <span class="string">'has been'</span>, op + <span class="string">'ed'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// echo.render(); is also available for non-scroll callbacks</span></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>学过前端的朋友应该一眼就能看清楚这是怎么实现的，他的基本原理就是利用 <code>hexo-renderer-marked-lazy</code> 插件把 <code>md</code> 文章中的图片标记： <code>![real image](http://url/to/real/img.jpg)</code> 渲染成带有 <code>data-echo</code> 标签的 HTML ： <code>&lt;img src=&quot;blankSrc.gif&quot; data-echo=&quot;http://url/to/real/img.jpg&quot; alt=&quot;some desc&quot;&gt;</code> ，这样显示的不是真实的图片，而是你在配置文件中配置的 <code>blankSrc</code> 所指向的临时图片，最后由 <code>echo.js</code> 脚本替换临时图片 <code>src</code> 为 <code>data-echo</code> 表示的真实链接并加载真实的图片。</p>
<p>怎么样？也比较简单吧，确实折腾了我很久，需要的就 Add 上吧！</p>
<h3 id="5-强大的静态搜索功能插件"><a href="#5-强大的静态搜索功能插件" class="headerlink" title="5. 强大的静态搜索功能插件"></a>5. 强大的静态搜索功能插件</h3><p>现在哪个页面没有搜索功能？内容为王的前提下，搜索功能显得尤为重要！此乃必不可少的功能，大牛、 dalao 有的组件，我们小菜也要有！ :grimacing:</p>
<p>关于 Hexo 博客搜索功能，我参考了不少文章，但是要么比价复杂，要么需要技术支持，折腾了我一天！最后在这篇文章：<strong><a href="http://www.netcan666.com/2015/11/20/%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3Hexo%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%90%9C%E7%B4%A2%E9%97%AE%E9%A2%98/" target="_blank" rel="noopener">完美解决Hexo静态博客搜索问题</a></strong>中找到了引荐的静态搜索开源项目： <a href="http://www.tipue.com/search/" target="_blank" rel="noopener">Tipue Search</a> ，但是这篇文章不适合我等新手，而这篇官方文章： <a href="https://www.npmjs.com/package/hexo-generator-tipue-search-json" target="_blank" rel="noopener">hexo-generator-tipue-search-json</a> 给了我足够的安装指导！</p>
<p>参考了 <code>hexo-generator-tipue-search-json</code> 这个插件的官方说明后，我也是按部就班地尝试，但是也有稍微不一样的地方，如果你需要这个功能，按照说明不能解决的话，那就按我的做吧， :laughing: 先安装插件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cnpm install hexo-generator-tipue-search-json --save</span><br></pre></td></tr></table></figure>

<p>这个插件主要用来生成搜索引擎需要的 JSON 数据，会保存在搜索引擎目录 <code>tipuesearch/tipuesearch_content.json</code> 文件中。安装好插件后，还要下载 Tipue 搜索插件的源码：Tipue Search <a href="http://www.tipue.com/search/tipuesearch.zip" target="_blank" rel="noopener">点击下载</a> ，下载完把压缩包里的 <code>tipuesearch</code> 文件夹复制到你的<strong>主题目录</strong>： <code>${theme_dir}/source</code> 下，然后修改<strong>主题文章模板</strong>文件 <code>article-full.ejs</code> 的内容（这些 <code>ejs</code> 文件一般都在 <code>${theme_dir}/layout/_partial</code> 下，自己找一下吧），添加如下搜索功能的代码，它的作用大概是相当于收录文章转化数据的意思吧：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id="tipue_search_content" style="display: none"&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 下面的是之前有的，上面的代码是添加的 --&gt;</span><br><span class="line">&lt;!-- Content --&gt;</span><br><span class="line">&lt;%- item.content %&gt;</span><br></pre></td></tr></table></figure>

<p>接着需要在有搜索功能的页面加入 JS 和 CSS 引用，在<strong>主题根部模板</strong>文件 <code>after-footer.ejs</code> 中添加以下引用和脚本，使 JS 发挥搜索的作用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;link href=<span class="string">"&lt;%- config.root %&gt;tipuesearch/css/tipuesearch.css"</span> rel=<span class="string">"stylesheet"</span>&gt;</span><br><span class="line">&lt;script src=<span class="string">"&lt;%- config.root %&gt;tipuesearch/tipuesearch_set.js"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="&lt;%- config.root %&gt;tipuesearch/</span>tipuesearch.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;!-- 这里可能有一些其他原来文件里的代码，也可以没有 --&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">    $(document).ready(function () &#123;</span></span><br><span class="line"><span class="string">        var searchInput = $('#tipue_search_input');</span></span><br><span class="line"><span class="string">        searchInput.tipuesearch(&#123;</span></span><br><span class="line"><span class="string">            'mode': 'json',</span></span><br><span class="line"><span class="string">            'minimumLength': 2,</span></span><br><span class="line"><span class="string">            'contentLocation': '&lt;%- config.root %&gt;tipuesearch/tipuesearch_content.json',</span></span><br><span class="line"><span class="string">            highlightEveryTerm: true</span></span><br><span class="line"><span class="string">        &#125;);</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">        $('#search-form').on('submit', function (e) &#123;</span></span><br><span class="line"><span class="string">            e.preventDefault();</span></span><br><span class="line"><span class="string">            $('#tipue_search_content').show();</span></span><br><span class="line"><span class="string">            $('#content').hide();</span></span><br><span class="line"><span class="string">        &#125;);</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">        searchInput.keyup(function () &#123;</span></span><br><span class="line"><span class="string">            var length = $(this).val().length;</span></span><br><span class="line"><span class="string">            if (length &lt; 1) &#123;</span></span><br><span class="line"><span class="string">                $('#tipue_search_content').hide();</span></span><br><span class="line"><span class="string">                $('#content').show();</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<p>最后，在<strong>主题页面模板</strong>文件 <code>article-page.ejs</code> 中添加搜索内容显示框（ <code>div</code> ）的 HTML 代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if(item.addSearch) &#123; %&gt;</span><br><span class="line">    &lt;form id="search-form"&gt;</span><br><span class="line">        &lt;div class="tipue_search_left"&gt;&lt;img src="&lt;%- config.root %&gt;tipuesearch/search.png" class="tipue_search_icon"&gt;&lt;/div&gt;</span><br><span class="line">        &lt;div class="tipue_search_right" style="width:80%;"&gt;&lt;input  type="text" name="q" id="tipue_search_input" autocomplete="off" required placeholder="&lt;%= __('search') %&gt;" style="width:80%;" /&gt;&lt;/div&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">    &lt;div id="tipue_search_content"&gt;&lt;/div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 下面的是之前有的，上面的代码是添加的 --&gt;</span><br><span class="line">&lt;!-- Content --&gt;</span><br><span class="line">&lt;%- item.content %&gt;</span><br></pre></td></tr></table></figure>

<p>这里有必要说明一下，我这里使用了 <code>&lt;% if(item.addSearch) { %&gt;</code> 这样的 <code>ejs</code> 语法块，其实很简单你也能看的懂，我是在 <code>md</code> 文章的开头 <code>Front-matter</code> 中添加了一个 <code>addSearch</code> 的变量，值为 <code>true</code> 表示生成的这个页面是带搜索功能的页面，值没有或者为 <code>false</code> 表示这个页面不会添加搜索引擎和显示搜索结果，关于 <code>Front-matter</code> 的解释就是每篇文章的开头 <code>---</code> 包含的代码部分，就像这样：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">分享几个实用的HEXO博客功能插件</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">Share</span> <span class="string">several</span> <span class="string">extra</span> <span class="string">useful</span> <span class="string">functionality</span> <span class="string">of</span> <span class="string">Hexo</span> <span class="string">blog</span> <span class="string">via</span> <span class="string">plugins</span> <span class="string">or</span> <span class="string">code</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2017</span><span class="number">-05</span><span class="number">-16</span> <span class="number">13</span><span class="string">:39:19</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">[Hexo]</span></span><br><span class="line"><span class="attr">cover_index:</span> <span class="string">cover.png</span></span><br><span class="line"><span class="attr">cover_detail:</span></span><br><span class="line"><span class="attr">addSearch:</span> <span class="literal">false</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>

<p>完成了所有配置，这时候你只需要新建一个提供搜索的页面即可，就像你创建 <code>Tags</code> <code>About</code> <code>Category</code> 页面一样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new page search</span><br></pre></td></tr></table></figure>

<p>如果你和我的一样设置，记得在 <code>source/_post/search</code> 文件夹下的 <code>index.md</code> 中的 <code>Front-matter</code> 添加 <code>addSearch: true</code> 参数。好了，就这样OK了，希望你能理解吧。 :blush:</p>
<h2 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h2><p>越到后面确实有点小复杂，我也是折腾了不少时间啊，主要是对于前端我几乎完全门外汉，没办法，只能自己琢磨了。不求花哨，但求够用。 :grin:</p>
<p>最后，在这里还是需要提醒一下，如果博客配置文件 <code>_config.yml</code> 中指定博客地址有根目录的话，比如我的博客根目录是 <code>root: /blog/</code> ，那么有很多地方需要加上 <code>config.root</code> 才能正确显示相关的链接（也包括资源的引用，你可以看到我的代码中不少包含了 <code>config.root</code> ），我设置了根目录，所以直接使用 Tipue 搜索引擎的时候搜索出来的文章显示的链接少了 <code>/blog</code> ，那样都是错误的地址，这时候就要手动更改一下 <code>hexo-generator-tipue-search-json</code> 这个插件的源码使它在生成的 JSON 数据的链接里加入 <code>/blog</code> ，修改按以下步骤：</p>
<ol>
<li>找到博客根目录下 <code>node_modules/hexo-generator-tipue-search-json/index.js</code> 文件</li>
<li>打开并找到这行代码： <code>case &#39;url&#39;: return actualPost[item] = post[&#39;path&#39;];</code></li>
<li>修改代码添加上根目录： <code>case &#39;url&#39;: return actualPost[item] = hexo.config.root + post[&#39;path&#39;];</code></li>
</ol>
<p>好了，希望对你有帮助。 :sunglasses:</p>
<blockquote>
<p>参考资料：<br>Hexo Tag Plugins: <a href="https://hexo.io/docs/tag-plugins.html" target="_blank" rel="noopener">https://hexo.io/docs/tag-plugins.html</a><br>Tipue Search: <a href="http://www.tipue.com/search/" target="_blank" rel="noopener">http://www.tipue.com/search/</a><br>Plugin: hexo-generator-tipue-search-json: <a href="https://www.npmjs.com/package/hexo-generator-tipue-search-json" target="_blank" rel="noopener">https://www.npmjs.com/package/hexo-generator-tipue-search-json</a><br>Plugin: hexo-filter-github-emojis: <a href="https://www.npmjs.com/package/hexo-filter-github-emojis" target="_blank" rel="noopener">https://www.npmjs.com/package/hexo-filter-github-emojis</a><br>Plugin: hexo-filter-github-emojis (Github): <a href="https://github.com/crimx/hexo-filter-github-emojis" target="_blank" rel="noopener">https://github.com/crimx/hexo-filter-github-emojis</a><br>Plugin: hexo-generator-feed: <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">https://github.com/hexojs/hexo-generator-feed</a><br>Plugin: hexo-renderer-marked-lazy: <a href="https://www.npmjs.com/package/hexo-renderer-marked-lazy" target="_blank" rel="noopener">https://www.npmjs.com/package/hexo-renderer-marked-lazy</a><br>Echo.js: <a href="https://github.com/toddmotto/echo/" target="_blank" rel="noopener">https://github.com/toddmotto/echo/</a></p>
</blockquote>


<!-- Tags -->



<div class="tags">
    <a href="/tags/Hexo/" class="button small">Hexo</a>
</div>



<!-- Pre-Next post added by me -->
<!-- Added by me, for pre-post and next-post links in post page -->

    <div class="prev_next clearfix">
      
        <a href="/2017/05/23/why-you-learn-new-skills-so-later/" class="alignleft prev" title="我为何早先于你学习并应用Kotlin"><i class="fa fa-angle-double-left"></i>&nbsp;我为何早先于你学习并应用Kotlin</a>
      
      
        &nbsp;<i class="fa fa-exchange separator"></i>&nbsp;
      
      
        <a href="/2017/05/11/bug-of-www-load-local-texture-in-unity3d/" class="alignright next" title="记一次Unity3D中WWW加载本地图片很慢的BUG">记一次Unity3D中WWW加载本地图片很慢的BUG&nbsp;<i class="fa fa-angle-double-right"></i></a>
      
      <div class="clearfix"></div>
    </div>



<!-- Comments -->
<div>
    
    <hr />
    <h3>Comments:</h3>
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript>
    </div>



</div>



            </div>
        </div>

        <!-- Footer -->
<footer id="footer">
    <div class="inner">
        <section>
            <h2>About</h2>
            <div>
                This theme was initially developed by <a href="http://html5up.net" target="_blank">HTML5 UP</a>. It is adapted for Hexo by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a>. <br/>The source code is available on <a href="https://github.com/klugjo/hexo-theme-phantom" target="_blank">GitHub</a>. <br/><span id="busuanzi_container_site_pv">Total visits:&nbsp;<span id="busuanzi_value_site_pv"></span> , </span><span id="busuanzi_container_site_uv">Number of visitors:&nbsp;<span id="busuanzi_value_site_uv"></span> , staticstics powered by <a href="http://busuanzi.ibruce.info/" target="_blank" title="不蒜子统计">不蒜子</a></span> <br/>Blog post content:&nbsp;<a href="http://liuqingwen.me/tags"><span><i class="fa fa-search"></i>&nbsp;搜索博客内容</span></a>
            </div>
        </section>
        <section>
            <h2>Follow</h2>
            <ul class="icons">
                
                    <li><a href="https://twitter.com/SpkingR" class="icon style2 fa-twitter" target="_blank" ><span class="label">Twitter</span></a></li>
                
                
                
                
                
                    <li><a href="https://github.com/spkingr" class="icon style2 fa-github" target="_blank" ><span class="label">GitHub</span></a></li>
                
                
                    <li><a href="https://plus.google.com/u/0/101955667782244488142" class="icon style2 fa-google-plus" target="_blank" ><span class="label">Google+</span></a></li>
                
                
                
                
                    <li><a href="about/" class="icon style2 fa-envelope-o" target="_blank" ><span class="label">Email</span></a></li>
                
                
                    <li><a href="/atom.xml" class="icon style2 fa-rss" target="_blank" ><span class="label">RSS</span></a></li>
                
            </ul>
            <ul class="links">
                <!-- Added by me, settings in config file -->
                
                    <li><a href="https://zhuanlan.zhihu.com/godot" class="icon style2 zhihu" target="_blank" ><span class="label">知乎</span></a></li>
                
                
                    <li><a href="https://www.jianshu.com/u/756bad579149" class="icon style2 jianshu" target="_blank" ><span class="label">简书</span></a></li>
                
                
                    <li><a href="https://juejin.im/user/59d1d5b1f265da0656048d2b" class="icon style2 juejin" target="_blank" ><span class="label">掘金</span></a></li>
                
                
                    <li><a href="https://blog.csdn.net/SpkingR" class="icon style2 csdn" target="_blank" ><span class="label">CSDN</span></a></li>
                
                
                    <li><a href="https://www.indienova.com/u/liuqingwen" class="icon style2 indienova" target="_blank" ><span class="label">INDIE NOVA</span></a></li>
                
            </ul>
        </section>
        <ul class="copyright">
            <li>&copy; liuqingwen.me. All rights reserved</li>
            <li>Design: <a href="http://html5up.net" target="_blank">HTML5 UP</a></li>
            <li>Hexo: <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></li>
            <li>About Me: <a href="/about">Liuqingwen</a></li>
            <li>备案号: <a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener">湘ICP备14005092号</a></li>
        </ul>
    </div>
</footer>
    </div>

    <!-- After footer scripts -->
    <!-- jQuery -->

<script src="/js/jquery.min.js"></script>


<!-- skel -->

<script src="/js/skel.min.js"></script>


<!-- Custom Code -->

<script src="/js/util.js"></script>


<!--[if lte IE 8]>

<script src="/js/ie/respond.min.js"></script>

<![endif]-->

<!-- Custom Code -->

<script src="/js/main.js"></script>

<!-- My Custom Code for add lazy-loading-image plugin -->

<script src="/scripts/echo.js"></script>


<script>
    echo.init({
        offset: 100,
        throttle: 250,
        unload: false,
        callback: function (element, op) {
            //Added by me!!! Help to display correctly in Mobile
            /*var entryContentWidth = $(element).width();
            if($(element).width() > entryContentWidth)
            {
                $(element).width("100%");
            }*/
            $(element).css({maxWidth: "100%"});
            // console.log(element, 'has been', op + 'ed');
        }
    });
  // echo.render(); is also available for non-scroll callbacks
</script>

<!-- Added for tipue search plugin....................... -->
<link href="/tipuesearch/css/tipuesearch.css" rel="stylesheet">
<script src="/tipuesearch/tipuesearch_set.js"></script>
<script src="/tipuesearch/tipuesearch.js"></script>
<script>
    $(document).ready(function () {
 
        var searchInput = $('#tipue_search_input');
        searchInput.tipuesearch({
            'mode': 'json',
            'minimumLength': 2,
            'contentLocation': '/tipuesearch/tipuesearch_content.json',
            highlightEveryTerm: true
        });
 
        $('#search-form').on('submit', function (e) {
            e.preventDefault();
            $('#tipue_search_content').show();
            $('#content').hide();
        });
 
        searchInput.keyup(function () {
            var length = $(this).val().length;
            if (length < 1) {
                $('#tipue_search_content').hide();
                $('#content').show();
            }
        });
    });
</script>

<!-- Gallery 
<script src="//cdn.rawgit.com/noelboss/featherlight/1.3.5/release/featherlight.min.js" type="text/javascript" charset="utf-8"></script> -->
<script src="https://cdn.bootcss.com/featherlight/1.7.13/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->

<script type="text/javascript">
    var disqus_shortname = 'liuqingwen';

    (function(){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


<!-- Calendar -->
<!-- Add by me, the calendar plugin, from: http://howiefh.github.io/2016/04/29/hexo-s-calendar-plugin/ -->

    <script src="/js/calendar.js"></script>
    <script src="/js/languages.js"></script>
    <script type="text/javascript">
        $(function() {
            
                //The same in else! edited by me.....
                $('#calendar').aCalendar('zh-CN',{single:true, root:'calendar/'});
                
                
                    $('#calendar-sample').aCalendar('zh-CN',{single:true, root:'calendar/'});
                
                //Error in the below line:
                //$('#calendar').aCalendar('zh-CN', $.extend(JSON.parse('{"months":["January","February","March","April","May","June","July","August","September","October","November","December"],"dayOfWeekShort":["S","M","T","W","T","F","S"],"dayOfWeek":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"postsMonthTip":"Posts published in LMM yyyy","titleFormat":"yyyy LMM","titleLinkFormat":"/archives/yyyy/MM/","headArrows":{"previous":null,"next":null},"footArrows":{"previous":"«","next":"»"},"weekOffset":0,"single":true,"root":"/calendar/","url":"/calendar.json"}'), {single:true, root:'calendar/'});
            
        });
    </script>


<!-- Calculator of Blog Viewers -->
<!-- Added by me, http://ibruce.info/2015/04/04/busuanzi/ || http://busuanzi.ibruce.info/-->

    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



</body>

</html>